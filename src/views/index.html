<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8" />
  <title>Cronometro</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous" />
  <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
    integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx"
    crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"></script>
  <script src="https://kit.fontawesome.com/83a076d015.js" crossorigin="anonymous"></script>
  <link rel="stylesheet" href="/css/content.css" />
</head>

<body>
  <main>
    <h1>Cronometro</h1>
    <p id="clock">00:00:00</p>
    <div id="controls">
      <button onclick="start()" id="start-button" class="btn btn-primary">
        <i class="fas fa-play"></i>
        Start
      </button>
      <button onclick="pause()" id="pause-button" class="btn btn-info" disabled>
        <i class="fas fa-pause"></i>
        Pause
      </button>
      <button onclick="reset()" id="reset-button" class="btn btn-success" disabled>
        <i class="fas fa-sync-alt"></i>
        Reset
      </button>
      <button onclick="stop()" id="stop-button" class="btn btn-danger" disabled>
        <i class="fas fa-stop-circle"></i>
        Stop
      </button>
    </div>
  </main>
  <style>
    @charset "UTF-8";
    @import url("https://fonts.googleapis.com/css2?family=Orbitron:wght@900&display=swap");
    @import url("https://fonts.googleapis.com/css2?family=VT323&display=swap");

    h1 {
      color: green;
      text-align: center;
      font-family: "VT323", monospace;
      font-size: 100px;
    }

    #clock {
      text-align: center;
      font-family: "Orbitron", sans-serif;
      font-size: 100px;
    }

    #controls {
      text-align: center;
    }

    body {
      background-color: rgb(166, 255, 228);
    }
  </style>
  <script>
    let hours = 0, minutes = 0, seconds = 0;
    let running = false;

    function start() {
      $("#start-button").attr("disabled", true);
      $("#pause-button").attr("disabled", false);
      $("#reset-button").attr("disabled", false);
      $("#stop-button").attr("disabled", false);
      running = true;
      runClock();
    }

    function pause() {
      $("#start-button").attr("disabled", false);
      $("#pause-button").attr("disabled", true);
      $("#reset-button").attr("disabled", true);
      $("#stop-button").attr("disabled", false);
      running = false;
    }

    function reset() {
      $("#start-button").attr("disabled", true);
      $("#pause-button").attr("disabled", false);
      $("#reset-button").attr("disabled", false);
      $("#stop-button").attr("disabled", false);
      hours = 0;
      minutes = 0;
      seconds = 0;
    }

    function stop() {
      $("#start-button").attr("disabled", false);
      $("#pause-button").attr("disabled", true);
      $("#reset-button").attr("disabled", true);
      $("#stop-button").attr("disabled", true);
      hours = 0;
      minutes = 0;
      seconds = 0;
      running = false;
      $("#clock").text("00:00:00");
    }

    async function runClock() {
      let clock = $("#clock");
      while (running) {
        clock.text(format(hours) + ":" + format(minutes) + ":" + format(seconds));
        seconds++;
        if (seconds == 60) {
          seconds = 0;
          minutes++;
        }
        if (minutes == 60) {
          minutes = 0;
          hours++;
        }
        await sleep(1000);
      }
    }

    function sleep(ms) {
      return new Promise(resolve => setTimeout(resolve, ms));
    }

    function format(n) {
      return n < 10 ? "0" + n : n;
    }
  </script>
</body>

</html>